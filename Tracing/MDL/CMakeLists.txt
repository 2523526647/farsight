PROJECT(MDL)
INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIR} ${Farsight_BINARY_DIR}/Tracing/MDL )
ADD_EXECUTABLE(AnisoDiffuse AnisoDiffuse.cpp)
ADD_EXECUTABLE(ConnCompntwFldfill ConnCompntwFldfill.cpp)
ADD_EXECUTABLE(GradientVecField GradientVecField.cpp)
ADD_EXECUTABLE(MinSpanTree distTransform.cpp MinSpanTree.cpp morphGraphPrune.cpp) 
ADD_EXECUTABLE(Integratedskel Integratedskel.cpp)
ADD_EXECUTABLE(volumeProcess volumeProcess.cpp)
TARGET_LINK_LIBRARIES(volumeProcess ITKIO ITKStatistics)
ADD_EXECUTABLE(RefiningSkeleton RefiningSkeleton.cpp)
ADD_EXECUTABLE(MDABasedSpineExtraction distTransform.cpp MDABasedSpineExtraction.cpp morphGraphPrune.cpp)
ADD_EXECUTABLE(BackboneExtract BackboneExtract.cpp)
ADD_EXECUTABLE(ShapeDetectionLevelSegmentation ShapeDetectionLevelSetFilter.cxx)
TARGET_LINK_LIBRARIES(ShapeDetectionLevelSegmentation  ITKBasicFilters ITKCommon ITKIO ITKStatistics)
ADD_EXECUTABLE(DistanceFieldComputing distTransform.cpp DistanceFieldComputing.cpp) 
TARGET_LINK_LIBRARIES(DistanceFieldComputing  ITKIO ITKStatistics)

ADD_EXECUTABLE(BSplineFitting BSplineFitting.cpp)
TARGET_LINK_LIBRARIES(BSplineFitting
  ITKBasicFilters ITKCommon ITKIO ITKStatistics)

QT4_WRAP_UI( MY_UI_HDRS MDLGUI.ui )
QT4_WRAP_CPP( GUI_MOC_SRCS MDLGUI.h )
SET(MDLGUI_SRCS
  MDLGUI.h MDLGUI.cxx 
  MDLGUI-main.cxx ${GUI_MOC_SRCS} ${MY_UI_HDRS})
ADD_EXECUTABLE(MDLGUI ${MDLGUI_SRCS} )
TARGET_LINK_LIBRARIES(MDLGUI ${QT_LIBRARIES})

#QT4_WRAP_UI( MY_UI_HDRS MDLWizard.ui )
#QT4_WRAP_CPP( Wizard_MOC_SRCS MDLWizard.h )
#SET(MDLWizard_SRCS
#  MDLWizard.h MDLWizard.cxx 
#  MDLWizard-main.cxx ${Wizard_MOC_SRCS} ${MY_UI_HDRS})
#ADD_EXECUTABLE(MDLWizard ${MDLWizard_SRCS} )
#TARGET_LINK_LIBRARIES(MDLWizard ${QT_LIBRARIES})

ADD_CUSTOM_COMMAND(
  TARGET MinSpanTree
  POST_BUILD
  COMMAND ${CMAKE_COMMAND}
  ARGS -D CMAKE_CFG_INTDIR:STRING=${CMAKE_CFG_INTDIR}
  ARGS -D CMAKE_EXECUTABLE_SUFFIX:STRING=${CMAKE_EXECUTABLE_SUFFIX}
  ARGS -D PROJECT_SOURCE_DIR:STRING=${PROJECT_SOURCE_DIR}
       -D PROJECT_BINARY_DIR:STRING=${PROJECT_BINARY_DIR}
       -P ${PROJECT_SOURCE_DIR}/ConfigureMDL.cmake)

ADD_CUSTOM_COMMAND(TARGET MinSpanTree POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy
  ${PROJECT_SOURCE_DIR}/ParseParameters.py
  ${PROJECT_BINARY_DIR}/ParseParameters.py)
ADD_CUSTOM_COMMAND(TARGET MinSpanTree POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy
  ${PROJECT_SOURCE_DIR}/MDLParameterDescriptions.xml
  ${PROJECT_BINARY_DIR}/MDLParameterDescriptions.xml)

INSTALL( TARGETS AnisoDiffuse DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS ConnCompntwFldfill DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS GradientVecField DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS MinSpanTree DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS Integratedskel DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS volumeProcess DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS BSplineFitting DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS RefiningSkeleton DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS MDLGUI DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS MDABasedSpineExtraction DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS ShapeDetectionLevelSegmentation DESTINATION ${INSTALL_BIN_DIR} )
INSTALL( TARGETS DistanceFieldComputing DESTINATION ${INSTALL_BIN_DIR} )

